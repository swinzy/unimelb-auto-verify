<!DOCTYPE html>

<html lang="en" data-bs-theme="auto">
<head>
    <meta charset="utf-8">
    <title>Options - Unimelb Auto Verify</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link href="style.css" rel="stylesheet">
    <script src="bootstrap/bootstrap.bundle.min.js"></script>
    <script src="bootstrap-auto-dark-mode.js"></script>
</head>
<body>
<svg xmlns="http://www.w3.org/2000/svg" class="d-none">
    <symbol id="exclamation-triangle-fill" viewBox="0 0 16 16">
        <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
    </symbol>
</svg>
<div class="py-5">
    <table class="center fake-height">
        <tbody>
        <tr>
            <td class="px-3">
                <img src="../res/logo.svg" alt="UAV Logo" id="uav-logo"/>
            </td>
            <td class="p-0 h-100">
                <div class="h-100 vr"></div>
            </td>
            <td class="px-3">
                <h3>Unimelb Auto Verify</h3>
            </td>
        </tr>
        </tbody>
    </table>
</div>
<div class="container-fluid" id="option-container">
    <div class="card">
        <div class="card-header">
            <ul class="nav nav-tabs card-header-tabs" id="options-tab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="pref-tab" data-bs-toggle="tab" data-bs-target="#pref-tab-pane" type="button" role="tab" aria-controls="pref-tab-pane" aria-selected="true">Preferences</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="acc-tab" data-bs-toggle="tab" data-bs-target="#acc-tab-pane" type="button" role="tab" aria-controls="acc-tab-pane" aria-selected="false">Account</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="exp-tab" data-bs-toggle="tab" data-bs-target="#exp-tab-pane" type="button" role="tab" aria-controls="exp-tab-pane" aria-selected="false">Experimental Functions</button>
                </li>
            </ul>
        </div>
        <div class="card-body">
            <div class="tab-content py-4" id="options-content">
                <div class="tab-pane fade show active" id="pref-tab-pane" role="tabpanel" aria-labelledby="pref-tab-tab" tabindex="0">
                    <div class="form-switch mb-3 p-0">
                        <label class="form-label" for="show-decor-box">Show effective decoration</label>
                        <input type="checkbox" class="form-check-input ms-3" id="show-decor-box" autocomplete="off" aria-describedby="show-decor-desc" role="switch">
                        <div id="show-decor-desc" class="form-text">
                            If enabled, a green border will be shown when the extension is effective.
                        </div>
                    </div>
                    <div class="form-switch mb-3 p-0">
                        <label class="form-label me-3" for="auto-submit-box">Auto submit verification code</label>
                        <input type="checkbox" class="form-check-input ms-3" id="auto-submit-box" autocomplete="off" aria-describedby="auto-submit-desc" role="switch">
                        <div id="auto-submit-desc" class="form-text">
                            If enabled, after the extension autofilled the verification code, it will press "Verify" button for you.
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="acc-tab-pane" role="tabpanel" aria-labelledby="acc-tab" tabindex="0">
                    <div class="mb-3">
                        <label for="username-input" class="form-label">Unimelb account username</label>
                        <input type="text" class="form-control text-uppercase" id="username-input"
                               aria-describedby="username-desc">
                        <div id="username-desc" class="form-text">The username you used to log in to Unimelb (not your email address).<br>
                            This will be used to verify OTP code autofill.
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="otp-secret-input" class="form-label">OTP secret</label>
                        <input type="password" class="form-control mb-2"
                               placeholder="Your Unimelb Google Authenticator OTP secret" id="otp-secret-input"
                               aria-describedby="otp-warning">
                        <div class="dropdown">
                            <button id="import-modal-button" class="btn btn-secondary" type="button" data-bs-toggle="modal" data-bs-target="#import-link-modal">
                                Import from Google Authenticator
                            </button>
                        </div>
                        <div id="otp-warning" class="form-text text-danger">Your OTP secret will be stored locally unencrypted.
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="exp-tab-pane" role="tabpanel" aria-labelledby="exp-tab" tabindex="0">
                    <div class="alert alert-warning mb-3" role="alert">
                        <h5 class="alert-heading">Warning</h5>
                        <p>The functions below are highly experimental and can potentially break functionalities of web pages or expose sensitive information.</p>
                        <hr>
                        <p class="m-0"><strong>Please proceed with caution.</strong></p>
                    </div>
                    <div class="mb-3">
                        <label class="form-label" for="ea-group">Easy access</label>
                        <div id="ea-group" class="btn-group ms-3" role="group" aria-describedby="ea-desc">
                            <input type="radio" class="btn-check" name="ea-radio" id="ea-off" autocomplete="off" checked>
                            <label class="btn btn-outline-secondary" for="ea-off">Off</label>
                            <input type="radio" class="btn-check" name="ea-radio" id="ea-oc" autocomplete="off">
                            <label class="btn btn-outline-warning" for="ea-oc">One click</label>
                            <input type="radio" class="btn-check" name="ea-radio" id="ea-zc" autocomplete="off">
                            <label class="btn btn-outline-danger" for="ea-zc">Zero click</label>
                        </div>
                        <div id="ea-desc" class="form-text">
                            <span class="text-info">Please also enable "Auto submit verification code" in order to achieve easy access</span><br>
                            One click: the extension will take over after you entered username.<br>
                            Zero click: the extension will fully take over to enter username, password, and verification code.
                        </div>
                    </div>
                    <div class="mb-3 collapse" id="passwd-section">
                        <label for="passwd-input" class="form-label">Unimelb account password</label>
                        <input type="password" class="form-control"
                               placeholder="Your Unimelb account password" id="passwd-input"
                               aria-describedby="passwd-warning">
                        <div id="passwd-warning" class="form-text text-danger">Your password will be stored locally unencrypted.
                        </div>
                    </div>
                </div>
            </div>
            <div class="d-flex justify-content-end">
                <button id="save-button" class="btn btn-primary animated">Save</button>
            </div>
        </div>
    </div>
</div>


<footer class="z-n1 fixed-bottom py-3">
        <div class="container text-center">
            <div class="row text-center">
                <div class="col">
                    <a href="https://github.com/m1nicrusher/unimelb-auto-verify" target="_blank">
                        <img id="github-logo" src="../res/github-mark.svg"
                             alt="GitHub logo, linked to the project repository"/>
                    </a>
                </div>
            </div>
            <div class="row text-center">
                <div class="col">
                    <a href="https://github.com/m1nicrusher" target="_blank">
                        <p class="text-body-tertiary m-0">@m1nicrusher</p>
                    </a>
                </div>
            </div>
        </div>
    </footer>

<!-- Import from Link Modal -->
<div class="modal fade" id="import-link-modal" tabindex="-1" aria-labelledby="import-link-modal-label" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="import-link-modal-label">Import from otpauth-migration Link</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label for="migration-link-input" class="form-label">otpauth-migration link</label>
                    <input type="text" class="form-control mb-2" id="migration-link-input" placeholder="otpauth-migration://...">
                    <select class="form-select" multiple aria-label="account selection" id="account-select-input"></select>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button id="import-button" type="button" class="btn btn-primary" disabled>Import</button>
            </div>
        </div>
    </div>
</div>

<script src="../libs/migration.js"></script>
<script src="../libs/google-auth.js"></script>
<script src="options.js"></script>
</body>
</html>